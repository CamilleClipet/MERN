{"ast":null,"code":"import _classCallCheck from \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp/client2/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp/client2/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp/client2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp/client2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp/client2/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp/client2/src/components/Home/index.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport swal from 'sweetalert2';\nimport { Button, ButtonToolbar, Col, ControlLabel, FormGroup, FormControl, Table, Modal, Well } from 'react-bootstrap';\n\nvar myHashtags = require('../../hashtag.js');\n\nvar linkHashtag = myHashtags.linkHashtag;\nvar htmlDecode = myHashtags.htmlDecode;\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n    _this.state = {\n      articles: [],\n      messageFormModal: false,\n      editFormModal: false,\n      content: '',\n      editedcontent: '',\n      messages: [],\n      idMessage: ''\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"createArticle\",\n    value: function createArticle() {\n      //console.log('this.state', this.state);\n      var data = {\n        \"content\": this.state.content\n      };\n\n      if (data.content !== '') {\n        fetch(\"http://127.0.0.1:8000/message/create\", {\n          method: \"POST\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Authorization': localStorage.getItem('token')\n          },\n          body: JSON.stringify(data)\n        }).then(function (res) {\n          return res;\n        }).then(function (data) {\n          console.log(data);\n          console.log(\"Message successfully posted\"); //\tswal('Success!', 'Message successfully posted', 'success');\n\n          setTimeout(function () {\n            return window.location.reload();\n          }, 500);\n        });\n      } else {\n        console.log(\"content field empty\");\n        swal('Oops!', 'Seems like the content of your post is empty!', 'error');\n      }\n    }\n  }, {\n    key: \"edit\",\n    value: function edit(message) {\n      //console.log('this.state', this.state);\n      var data = {\n        \"content\": this.state.editedcontent\n      };\n\n      if (data.editedcontent !== '') {\n        fetch(\"http://127.0.0.1:8000/message/\" + message + \"/edit\", {\n          method: \"PUT\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(data)\n        }).then(function (res) {\n          return res;\n        }).then(function (data) {\n          console.log(data);\n          console.log(\"Message successfully edited\");\n          swal('Success!', 'Message successfully edited', 'success').then(function () {\n            window.location = \"/home\";\n          }); //setTimeout(() => window.location.reload(), 500);\n        });\n      } else {\n        console.log(\"content field empty\");\n        swal('Oops!', 'Seems like the content of your post is empty!', 'error');\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(message) {\n      //console.log('this.state', this.state);\n      fetch(\"http://127.0.0.1:8000/message/\" + message + \"/delete\", {\n        method: \"DELETE\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(function (res) {\n        return res;\n      });\n    }\n  }, {\n    key: \"getMessages\",\n    value: function getMessages() {\n      var _this2 = this;\n\n      axios.get('http://127.0.0.1:8000/message/messages', {\n        'headers': {\n          'Authorization': localStorage.getItem(\"token\")\n        }\n      }).then(function (res) {\n        //console.log(res);\n        //return res.data;\n        _this2.setState({\n          messages: res.data\n        });\n      });\n      return \"done\";\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getMessages();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var messages = this.state.messages; //console.log(this.state);\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"btn btn-primary\",\n        onClick: function onClick() {\n          return _this3.setState({\n            messageFormModal: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"New post\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(Modal, {\n        show: this.state.messageFormModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \" New post \"), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        controlId: \"formControlsTextarea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Size limited to 140 characters\"), React.createElement(FormControl, {\n        componentClass: \"textarea\",\n        placeholder: \"Your text\",\n        onChange: function onChange(event) {\n          return _this3.setState({\n            content: event.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        type: \"button\",\n        onClick: function onClick() {\n          return _this3.createArticle();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Post\"))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Button, {\n        id: \"closeform\",\n        onClick: function onClick() {\n          return _this3.setState({\n            messageFormModal: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Close\"))), messages.map(function (article) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, \"Your posts\"), _this3.state.articles, React.createElement(Well, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, \" \", React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, article.username), \" \", article.created_at, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: htmlDecode(linkHashtag(article.content))\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }), React.createElement(ButtonToolbar, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-danger pull-right\",\n          type: \"button\",\n          onClick: function onClick() {\n            return swal({\n              title: 'Are you sure?',\n              text: \"You won't be able to revert this!\",\n              type: 'warning',\n              showCancelButton: true,\n              confirmButtonColor: '#3085d6',\n              cancelButtonColor: '#d33',\n              confirmButtonText: 'Yes, delete it!'\n            }).then(function (result) {\n              if (result.value) {\n                _this3.delete(article._id);\n\n                swal('Deleted!', 'Your post has been deleted.', 'success').then(function () {\n                  window.location = \"/home\";\n                });\n              }\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, \" Delete\")), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, React.createElement(FormGroup, {\n          controlId: \"formControlsTextarea\",\n          style: {\n            display: m._id === _this3.state.idMessage ? \"\" : \"none\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, React.createElement(ControlLabel, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, \"Size limited to 140 characters\"), React.createElement(FormControl, {\n          componentClass: \"textarea\",\n          placeholder: article.content,\n          onChange: function onChange(event) {\n            return _this3.setState({\n              editedcontent: event.target.value\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: \"btn btn-primary\",\n          type: \"button\",\n          onClick: function onClick() {\n            return _this3.edit(article._id);\n          },\n          style: {\n            display: m._id === _this3.state.idMessage ? \"\" : \"none\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, \"Edit\"))));\n      }));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp/client2/src/components/Home/index.js"],"names":["React","Component","axios","swal","Button","ButtonToolbar","Col","ControlLabel","FormGroup","FormControl","Table","Modal","Well","myHashtags","require","linkHashtag","htmlDecode","Home","props","state","articles","messageFormModal","editFormModal","content","editedcontent","messages","idMessage","data","fetch","method","headers","localStorage","getItem","body","JSON","stringify","then","res","console","log","setTimeout","window","location","reload","message","get","setState","getMessages","event","target","value","createArticle","map","article","username","created_at","__html","title","text","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","delete","_id","display","m","edit"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport swal from 'sweetalert2';\nimport { Button, ButtonToolbar, Col, ControlLabel,FormGroup, FormControl, Table, Modal, Well } from 'react-bootstrap';\nvar myHashtags = require('../../hashtag.js');\nvar linkHashtag = myHashtags.linkHashtag;\nvar htmlDecode = myHashtags.htmlDecode;\n\n\nclass Home extends Component{\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tarticles: [],\n\t\t\tmessageFormModal: false,\n\t\t\teditFormModal: false,\n\t\t\tcontent: '',\n\t\t\teditedcontent: '',\n\t\t\tmessages: [],\n\t\t\tidMessage: '',\n\t\t};\n\t}\n\n\tcreateArticle() {\n\t\t//console.log('this.state', this.state);\n\t\tvar data = {\n\t\t\t\"content\": this.state.content,\n\t\t}\n\t\tif (data.content !== '' ) {\n\t\t\tfetch(\"http://127.0.0.1:8000/message/create\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Authorization': localStorage.getItem('token')\n\t\t\t\t},\n\t\t\t\tbody:  JSON.stringify(data)\n\t\t\t})\n\t\t\t.then(function(res){\n\t\t\t\treturn res;\n\t\t\t})\n\t\t\t.then(function(data){\n\t\t\t\tconsole.log(data);\n\t\t\t\tconsole.log(\"Message successfully posted\");\n\t\t\t//\tswal('Success!', 'Message successfully posted', 'success');\n\t\t\t\tsetTimeout(() => window.location.reload(), 500);\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.log(\"content field empty\");\n\t\t\tswal('Oops!', 'Seems like the content of your post is empty!', 'error');\n\t\t}\n\t}\n\n\tedit(message) {\n\t\t//console.log('this.state', this.state);\n\t\tvar data = {\n\t\t\t\"content\": this.state.editedcontent,\n\t\t}\n\t\tif (data.editedcontent !== '' ) {\n\t\t\tfetch(\"http://127.0.0.1:8000/message/\"+message+\"/edit\", {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tbody:  JSON.stringify(data)\n\t\t\t})\n\t\t\t.then(function(res){\n\t\t\t\treturn res;\n\t\t\t})\n\t\t\t.then(function(data){\n\t\t\t\tconsole.log(data);\n\t\t\t\tconsole.log(\"Message successfully edited\");\n\t\t\t\tswal('Success!', 'Message successfully edited', 'success').then(function(){\n\t\t\t\t\twindow.location = \"/home\";\n\t\t\t\t});\n\t\t\t\t//setTimeout(() => window.location.reload(), 500);\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.log(\"content field empty\");\n\t\t\tswal('Oops!', 'Seems like the content of your post is empty!', 'error');\n\t\t}\n\t}\n\n\tdelete(message) {\n\t\t//console.log('this.state', this.state);\n\t\t\tfetch(\"http://127.0.0.1:8000/message/\"+message+\"/delete\", {\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(function(res){\n\t\t\t\treturn res;\n\t\t\t});\n\t}\n\n\tgetMessages() {\n\t\taxios.get('http://127.0.0.1:8000/message/messages', { 'headers': { 'Authorization': localStorage.getItem(\"token\")}})\n\t\t.then(res => {\n\t\t\t//console.log(res);\n\t\t\t//return res.data;\n\t\t\tthis.setState({messages:res.data});\n\t\t});\n\t\treturn \"done\";\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getMessages();\n\t}\n\n\n\trender(){\n\t\tvar messages = this.state.messages;\n\t\t//console.log(this.state);\n\t\treturn(\n\t\t\t<div className = \"container\">\n\t\t\t<Button\n\t\t\t\tclassName=\"btn btn-primary\"\n\t\t\t\tonClick={() => this.setState({ messageFormModal: true })}\n\t\t\t\t>\n\t\t\t\tNew post\n\t\t\t</Button>\n\t\t\t<br/>\n\t\t\t<Modal show={this.state.messageFormModal}>\n\t\t\t<br />\n\t\t\t<Modal.Body>\n\t\t\t<h2> New post </h2>\n\t\t\t\t<div className='form-group'>\n\t\t\t\t\t<FormGroup controlId=\"formControlsTextarea\">\n\t\t\t\t\t<ControlLabel>Size limited to 140 characters</ControlLabel>\n\t\t\t\t\t<FormControl\n\t\t\t\t\tcomponentClass=\"textarea\"\n\t\t\t\t\tplaceholder=\"Your text\"\n\t\t\t\t\tonChange={event => this.setState({content:event.target.value})}/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName='btn btn-primary'\n\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\tonClick={() => this.createArticle()}>\n\t\t\t\t\t\tPost\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</Modal.Body>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Button\n\t\t\t\tid=\"closeform\"\n\t\t\t\tonClick={() => this.setState({ messageFormModal: false })}\n\t\t\t\t>\n\t\t\t\tClose\n\t\t\t\t</Button>\n\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\n\t\t\t{messages.map((article) => {\n\t\t\t\treturn(\n\t\t\t\t\t<div>\n\t\t\t\t\t<h2>Your posts</h2>\n\t\t\t\t\t{this.state.articles}\n\t\t\t\t\t\t<Well> <b>{article.username}</b> {article.created_at}<br/>\n\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: htmlDecode(linkHashtag(article.content)) }} />\n\t\t\t\t\t\t<ButtonToolbar>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName='btn btn-danger pull-right'\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\tswal({\n\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\ttext: \"You won't be able to revert this!\",\n\t\t\t\t\t\t\t\ttype: 'warning',\n\t\t\t\t\t\t\t\tshowCancelButton: true,\n\t\t\t\t\t\t\t\tconfirmButtonColor: '#3085d6',\n\t\t\t\t\t\t\t\tcancelButtonColor: '#d33',\n\t\t\t\t\t\t\t\tconfirmButtonText: 'Yes, delete it!'\n\t\t\t\t\t\t\t\t}).then((result) => {\n\t\t\t\t\t\t\t\t\tif (result.value) {\n\t\t\t\t\t\t\t\t\t\tthis.delete(article._id);\n\t\t\t\t\t\t\t\t\t\tswal(\n\t\t\t\t\t\t\t\t\t\t\t'Deleted!',\n\t\t\t\t\t\t\t\t\t\t\t'Your post has been deleted.',\n\t\t\t\t\t\t\t\t\t\t\t'success'\n\t\t\t\t\t\t\t\t\t\t).then(function(){\n\t\t\t\t\t\t\t\t\t\twindow.location = \"/home\";\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})}> Delete\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</ButtonToolbar>\n\t\t\t\t\t\t\t<div className='form-group'>\n\t\t\t\t\t\t\t <FormGroup\n\t\t\t\t\t\t\t controlId=\"formControlsTextarea\"\n\t\t\t\t\t\t\t style={{\n                display: m._id === this.state.idMessage ? \"\" : \"none\"\n                }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t <ControlLabel>Size limited to 140 characters</ControlLabel>\n\t\t\t\t\t\t\t <FormControl\n\t\t\t\t\t\t\t componentClass=\"textarea\"\n\t\t\t\t\t\t\t placeholder={article.content}\n\t\t\t\t\t\t\t onChange={event => this.setState({editedcontent:event.target.value})}/>\n\t\t\t\t\t\t\t </FormGroup>\n\t\t\t\t\t\t\t <button\n\t\t\t\t\t\t\t\t className='btn btn-primary'\n\t\t\t\t\t\t\t\t type='button'\n\t\t\t\t\t\t\t\t onClick={() => this.edit(article._id)}\n\t\t\t\t\t\t\t\t style={{\n                      display: m._id === this.state.idMessage ? \"\" : \"none\"\n                  }}>\n\t\t\t\t\t\t\t\t Edit\n\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t </div>\n\t\t\t\t\t\t</Well>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t})}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}