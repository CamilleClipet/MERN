{"ast":null,"code":"import _classCallCheck from \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp_copy/client2/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp_copy/client2/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp_copy/client2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp_copy/client2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp_copy/client2/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp_copy/client2/src/components/Admin/index.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport swal from 'sweetalert2';\nimport { Button, ButtonToolbar, Col, ControlLabel, FormGroup, FormControl, Table, Modal, Well } from 'react-bootstrap'; //import * as jwt_decode from 'jwt_decode';\n\nvar Admin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Admin, _Component);\n\n  function Admin(props) {\n    var _this;\n\n    _classCallCheck(this, Admin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Admin).call(this, props));\n    _this.state = {\n      users: [],\n      currentUser: [],\n      userFormModal: false\n    };\n    var token = localStorage.getItem('token');\n\n    if (token) {\n      var _token = localStorage.getItem('token');\n\n      var decoded = jwt_decode(_token);\n\n      _this.setState({\n        username: decoded.username\n      });\n    }\n\n    return _this;\n  }\n\n  _createClass(Admin, [{\n    key: \"follow\",\n    value: function follow(user) {\n      //console.log('this.state', this.state);\n      fetch(\"http://127.0.0.1:8000/user/follow/\" + user, {\n        method: \"PUT\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': localStorage.getItem('token')\n        }\n      }).then(function (res) {\n        return res;\n      }).then(function (data) {\n        console.log(data.text);\n        console.log(\"user successfully followed\");\n        swal('Success!', 'Followed!', 'success');\n      });\n    }\n  }, {\n    key: \"unfollow\",\n    value: function unfollow(user) {\n      //console.log('this.state', this.state);\n      fetch(\"http://127.0.0.1:8000/user/unfollow/\" + user, {\n        method: \"PUT\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': localStorage.getItem('token')\n        }\n      }).then(function (res) {\n        return res;\n      }).then(function (data) {\n        console.log(data.text);\n        console.log(\"user successfully unfollowed\");\n        swal('Success!', 'Unfollowed!', 'success');\n      });\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      fetch(\"http://127.0.0.1:8000/user/delete\", {\n        method: \"PUT\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': localStorage.getItem('token')\n        }\n      }).then(function (res) {\n        return res;\n      }).then(function (data) {\n        console.log(data.text);\n        console.log(\"user successfully deleted\");\n        swal('Success!', 'Deleted!', 'success');\n        window.location = \"/signin\";\n      });\n    }\n  }, {\n    key: \"getUsers\",\n    value: function getUsers() {\n      var _this2 = this;\n\n      axios.get('http://127.0.0.1:8000/user/users', {\n        'headers': {\n          'Authorization': localStorage.getItem(\"token\")\n        }\n      }).then(function (res) {\n        //console.log(res);\n        //return res.data;\n        _this2.setState({\n          users: res.data\n        });\n      });\n      return \"done\";\n    }\n  }, {\n    key: \"getCurrent\",\n    value: function getCurrent() {\n      var _this3 = this;\n\n      axios.get('http://127.0.0.1:8000/user/me', {\n        'headers': {\n          'Authorization': localStorage.getItem(\"token\")\n        }\n      }).then(function (res) {\n        //console.log(res);\n        //return res.data;\n        _this3.setState({\n          currentUser: res.data\n        });\n      });\n      return \"done\";\n    }\n  }, {\n    key: \"edit\",\n    value: function edit() {\n      //console.log('this.state', this.state);\n      var data = {\n        \"username\": this.state.username,\n        \"email\": this.state.email\n      };\n\n      if (data.editedcontent !== '') {\n        fetch(\"http://127.0.0.1:8000/user/edit\", {\n          method: \"PUT\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Authorization': localStorage.getItem('token')\n          },\n          body: JSON.stringify(data)\n        }).then(function (res) {\n          return res;\n        }).then(function (data) {\n          console.log(data);\n          console.log(\"User successfully edited\");\n          swal('Success!', 'User successfully edited', 'success').then(function () {\n            window.location = \"/admin\";\n          });\n        });\n      } else {\n        console.log(\"content field empty\");\n        swal('Oops!', 'Seems like the content of your post is empty!', 'error');\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUsers();\n      this.getCurrent();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var users = this.state.users;\n      var current = this.state.currentUser;\n      console.log(\"state\", this.state);\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"My profile\"), current.map(function (user) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, React.createElement(Well, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, user.username, \" \"), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }), user.email, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }), \"Tweets: \", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }), \"Followers:\", React.createElement(ButtonToolbar, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn pull-right btn-danger\",\n          type: \"button\",\n          onClick: function onClick() {\n            return _this4.delete();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, \"Delete\"), React.createElement(\"button\", {\n          className: \"btn btn-primary pull-right\",\n          type: \"button\",\n          onClick: function onClick() {\n            return _this4.setState({\n              userFormModal: true\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, \"Edit\"))));\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"All Users\"), users.map(function (user) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, React.createElement(Well, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, user.username, \" \"), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }), user.email, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }), \"Tweets: \", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }), \"Followers:\", React.createElement(\"button\", {\n          className: \"btn pull-right\",\n          type: \"button\",\n          onClick: function onClick() {\n            return _this4.unfollow(user.username);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, \"Unfollow\"), React.createElement(\"button\", {\n          className: \"btn btn-primary pull-right\",\n          type: \"button\",\n          onClick: function onClick() {\n            return _this4.follow(user.username);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, \"Follow\")));\n      }), React.createElement(Modal, {\n        show: this.state.userFormModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, \" Edit my profile \"), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"Username\", React.createElement(\"input\", {\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: this.stat,\n        onChange: function onChange(event) {\n          return _this4.setState({\n            username: event.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }), \"Email\", React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"email\",\n        onChange: function onChange(event) {\n          return _this4.setState({\n            email: event.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }), \"Password\", React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"password\",\n        onChange: function onChange(event) {\n          return _this4.setState({\n            password: event.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-primary pull-right\",\n        type: \"button\",\n        onClick: function onClick() {\n          return _this4.updateUser();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"Post\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(Button, {\n        id: \"closeform\",\n        onClick: function onClick() {\n          return _this4.setState({\n            userFormModal: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"Close\"))));\n    }\n  }]);\n\n  return Admin;\n}(Component);\n\nexport default Admin;","map":{"version":3,"sources":["/Users/camilleclipet/Documents/Epitech/MERN/MERN_Rush/mernapp_copy/client2/src/components/Admin/index.js"],"names":["React","Component","axios","swal","Button","ButtonToolbar","Col","ControlLabel","FormGroup","FormControl","Table","Modal","Well","Admin","props","state","users","currentUser","userFormModal","token","localStorage","getItem","decoded","jwt_decode","setState","username","user","fetch","method","headers","then","res","data","console","log","text","window","location","get","email","editedcontent","body","JSON","stringify","getUsers","getCurrent","current","map","delete","unfollow","follow","stat","event","target","value","password","updateUser"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,SAASC,MAAT,EAAiBC,aAAjB,EAAgCC,GAAhC,EAAqCC,YAArC,EAAkDC,SAAlD,EAA6DC,WAA7D,EAA0EC,KAA1E,EAAiFC,KAAjF,EAAwFC,IAAxF,QAAoG,iBAApG,C,CACA;;IAEMC,K;;;;;AACL,iBAAaC,KAAb,EAAoB;AAAA;;AAAA;;AACnB,+EAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,KAAK,EAAE,EADK;AAEZC,MAAAA,WAAW,EAAE,EAFD;AAGZC,MAAAA,aAAa,EAAE;AAHH,KAAb;AAMA,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AACA,QAAGF,KAAH,EAAU;AACR,UAAMA,MAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AACA,UAAMC,OAAO,GAAGC,UAAU,CAACJ,MAAD,CAA1B;;AACA,YAAKK,QAAL,CAAc;AAAEC,QAAAA,QAAQ,EAAEH,OAAO,CAACG;AAApB,OAAd;AACA;;AAbiB;AAcnB;;;;2BAEMC,I,EAAM;AACZ;AACCC,MAAAA,KAAK,CAAC,uCAAqCD,IAAtC,EAA4C;AAChDE,QAAAA,MAAM,EAAE,KADwC;AAEhDC,QAAAA,OAAO,EAAE;AACR,oBAAU,kBADF;AAER,0BAAgB,kBAFR;AAGR,2BAAiBT,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHT;AAFuC,OAA5C,CAAL,CAQCS,IARD,CAQM,UAASC,GAAT,EAAa;AAClB,eAAOA,GAAP;AACA,OAVD,EAWCD,IAXD,CAWM,UAASE,IAAT,EAAc;AACnBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,IAAjB;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACA/B,QAAAA,IAAI,CAAC,UAAD,EAAa,WAAb,EAA0B,SAA1B,CAAJ;AACA,OAfD;AAgBD;;;6BAEQuB,I,EAAM;AACd;AACCC,MAAAA,KAAK,CAAC,yCAAuCD,IAAxC,EAA8C;AAClDE,QAAAA,MAAM,EAAE,KAD0C;AAElDC,QAAAA,OAAO,EAAE;AACR,oBAAU,kBADF;AAER,0BAAgB,kBAFR;AAGR,2BAAiBT,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHT;AAFyC,OAA9C,CAAL,CAQCS,IARD,CAQM,UAASC,GAAT,EAAa;AAClB,eAAOA,GAAP;AACA,OAVD,EAWCD,IAXD,CAWM,UAASE,IAAT,EAAc;AACnBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,IAAjB;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACA/B,QAAAA,IAAI,CAAC,UAAD,EAAa,aAAb,EAA4B,SAA5B,CAAJ;AACA,OAfD;AAgBD;;;8BAEQ;AACPwB,MAAAA,KAAK,CAAC,mCAAD,EAAsC;AAC1CC,QAAAA,MAAM,EAAE,KADkC;AAE1CC,QAAAA,OAAO,EAAE;AACR,oBAAU,kBADF;AAER,0BAAgB,kBAFR;AAGR,2BAAiBT,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHT;AAFiC,OAAtC,CAAL,CAQCS,IARD,CAQM,UAASC,GAAT,EAAa;AAClB,eAAOA,GAAP;AACA,OAVD,EAWCD,IAXD,CAWM,UAASE,IAAT,EAAc;AACnBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,IAAjB;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACA/B,QAAAA,IAAI,CAAC,UAAD,EAAa,UAAb,EAAyB,SAAzB,CAAJ;AACAiC,QAAAA,MAAM,CAACC,QAAP,GAAkB,SAAlB;AACA,OAhBD;AAiBD;;;+BAEU;AAAA;;AACVnC,MAAAA,KAAK,CAACoC,GAAN,CAAU,kCAAV,EAA8C;AAAE,mBAAW;AAAE,2BAAiBlB,YAAY,CAACC,OAAb,CAAqB,OAArB;AAAnB;AAAb,OAA9C,EACCS,IADD,CACM,UAAAC,GAAG,EAAI;AACZ;AACA;AACA,QAAA,MAAI,CAACP,QAAL,CAAc;AAACR,UAAAA,KAAK,EAACe,GAAG,CAACC;AAAX,SAAd;AACA,OALD;AAMA,aAAO,MAAP;AACA;;;iCAEY;AAAA;;AACZ9B,MAAAA,KAAK,CAACoC,GAAN,CAAU,+BAAV,EAA2C;AAAE,mBAAW;AAAE,2BAAiBlB,YAAY,CAACC,OAAb,CAAqB,OAArB;AAAnB;AAAb,OAA3C,EACCS,IADD,CACM,UAAAC,GAAG,EAAI;AACZ;AACA;AACA,QAAA,MAAI,CAACP,QAAL,CAAc;AAACP,UAAAA,WAAW,EAACc,GAAG,CAACC;AAAjB,SAAd;AACA,OALD;AAMA,aAAO,MAAP;AACA;;;2BAEM;AACL;AACD,UAAIA,IAAI,GAAG;AACV,oBAAY,KAAKjB,KAAL,CAAWU,QADb;AAEV,iBAAS,KAAKV,KAAL,CAAWwB;AAFV,OAAX;;AAIA,UAAIP,IAAI,CAACQ,aAAL,KAAuB,EAA3B,EAAgC;AAC/Bb,QAAAA,KAAK,CAAC,iCAAD,EAAoC;AACxCC,UAAAA,MAAM,EAAE,KADgC;AAExCC,UAAAA,OAAO,EAAE;AACR,sBAAU,kBADF;AAER,4BAAgB,kBAFR;AAGR,6BAAiBT,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHT,WAF+B;AAOxCoB,UAAAA,IAAI,EAAGC,IAAI,CAACC,SAAL,CAAeX,IAAf;AAPiC,SAApC,CAAL,CASCF,IATD,CASM,UAASC,GAAT,EAAa;AAClB,iBAAOA,GAAP;AACA,SAXD,EAYCD,IAZD,CAYM,UAASE,IAAT,EAAc;AACnBC,UAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACA/B,UAAAA,IAAI,CAAC,UAAD,EAAa,0BAAb,EAAyC,SAAzC,CAAJ,CAAwD2B,IAAxD,CAA6D,YAAU;AACtEM,YAAAA,MAAM,CAACC,QAAP,GAAkB,QAAlB;AACA,WAFD;AAGA,SAlBD;AAmBA,OApBD,MAoBO;AACNJ,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACA/B,QAAAA,IAAI,CAAC,OAAD,EAAU,+CAAV,EAA2D,OAA3D,CAAJ;AACA;AACD;;;wCAGmB;AACnB,WAAKyC,QAAL;AACA,WAAKC,UAAL;AACA;;;6BAIO;AAAA;;AACP,UAAI7B,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAvB;AACA,UAAI8B,OAAO,GAAG,KAAK/B,KAAL,CAAWE,WAAzB;AACAgB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB,KAAKnB,KAA1B;AACA,aACC;AAAK,QAAA,SAAS,EAAG,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADA,EAGC+B,OAAO,CAACC,GAAR,CAAY,UAACrB,IAAD,EAAU;AACrB,eACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACC,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIA,IAAI,CAACD,QAAT,MADD,EACwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADxB,EAEEC,IAAI,CAACa,KAFP,EAEa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFb,cAGS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHT,gBAKC,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AACA,UAAA,SAAS,EAAC,2BADV;AAEA,UAAA,IAAI,EAAC,QAFL;AAGA,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACS,MAAL,EAAN;AAAA,WAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,EAOA;AACA,UAAA,SAAS,EAAC,4BADV;AAEA,UAAA,IAAI,EAAC,QAFL;AAGA,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACxB,QAAL,CAAc;AAAEN,cAAAA,aAAa,EAAE;AAAjB,aAAd,CAAN;AAAA,WAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPA,CALD,CADD,CADD;AAyBA,OA1BD,CAHD,EAgCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAhCA,EAkCCF,KAAK,CAAC+B,GAAN,CAAU,UAACrB,IAAD,EAAU;AACnB,eACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACC,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIA,IAAI,CAACD,QAAT,MADD,EACwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADxB,EAEEC,IAAI,CAACa,KAFP,EAEa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFb,cAGS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHT,gBAKC;AACA,UAAA,SAAS,EAAC,gBADV;AAEA,UAAA,IAAI,EAAC,QAFL;AAGA,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACU,QAAL,CAAcvB,IAAI,CAACD,QAAnB,CAAN;AAAA,WAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBALD,EAWC;AACA,UAAA,SAAS,EAAC,4BADV;AAEA,UAAA,IAAI,EAAC,QAFL;AAGA,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACyB,MAAL,CAAYxB,IAAI,CAACD,QAAjB,CAAN;AAAA,WAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXD,CADD,CADD;AAsBA,OAvBD,CAlCD,EA4DA,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAE,KAAKV,KAAL,CAAWG,aAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,EAEC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADA,EAEC;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEC;AACA,QAAA,SAAS,EAAC,cADV;AAEA,QAAA,IAAI,EAAC,MAFL;AAGA,QAAA,WAAW,EAAG,KAAKiC,IAHnB;AAIA,QAAA,QAAQ,EAAE,kBAAAC,KAAK;AAAA,iBAAI,MAAI,CAAC5B,QAAL,CAAc;AAACC,YAAAA,QAAQ,EAAC2B,KAAK,CAACC,MAAN,CAAaC;AAAvB,WAAd,CAAJ;AAAA,SAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFD,WASC;AACA,QAAA,IAAI,EAAC,MADL;AAEA,QAAA,SAAS,EAAC,cAFV;AAGA,QAAA,WAAW,EAAE,OAHb;AAIA,QAAA,QAAQ,EAAE,kBAAAF,KAAK;AAAA,iBAAI,MAAI,CAAC5B,QAAL,CAAc;AAACe,YAAAA,KAAK,EAACa,KAAK,CAACC,MAAN,CAAaC;AAApB,WAAd,CAAJ;AAAA,SAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATD,cAgBC;AACA,QAAA,IAAI,EAAC,MADL;AAEA,QAAA,SAAS,EAAC,cAFV;AAGA,QAAA,WAAW,EAAE,UAHb;AAIA,QAAA,QAAQ,EAAE,kBAAAF,KAAK;AAAA,iBAAI,MAAI,CAAC5B,QAAL,CAAc;AAAC+B,YAAAA,QAAQ,EAACH,KAAK,CAACC,MAAN,CAAaC;AAAvB,WAAd,CAAJ;AAAA,SAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAhBD,EAqBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QArBD,EAsBC;AACC,QAAA,SAAS,EAAC,4BADX;AAEC,QAAA,IAAI,EAAC,QAFN;AAGC,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACE,UAAL,EAAN;AAAA,SAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAtBD,EA4BC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA5BD,CAFD,CAFD,EAoCC,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,MAAD;AACA,QAAA,EAAE,EAAC,WADH;AAEA,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAAChC,QAAL,CAAc;AAAEN,YAAAA,aAAa,EAAE;AAAjB,WAAd,CAAN;AAAA,SAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADD,CApCD,CA5DA,CADD;AA6GA;;;;EA1PkBjB,S;;AA8PpB,eAAeY,KAAf","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport swal from 'sweetalert2';\nimport { Button, ButtonToolbar, Col, ControlLabel,FormGroup, FormControl, Table, Modal, Well } from 'react-bootstrap';\n//import * as jwt_decode from 'jwt_decode';\n\nclass Admin extends Component{\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tusers: [],\n\t\t\tcurrentUser: [],\n\t\t\tuserFormModal: false,\n\t\t};\n\n\t\tconst token = localStorage.getItem('token');\n\t\tif(token) {\n\t\t\t const token = localStorage.getItem('token');\n\t\t\t const decoded = jwt_decode(token);\n\t\t\t this.setState({ username: decoded.username });\n\t\t }\n\t}\n\n\tfollow(user) {\n\t\t//console.log('this.state', this.state);\n\t\t\tfetch(\"http://127.0.0.1:8000/user/follow/\"+user, {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Authorization': localStorage.getItem('token')\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(function(res){\n\t\t\t\treturn res;\n\t\t\t})\n\t\t\t.then(function(data){\n\t\t\t\tconsole.log(data.text);\n\t\t\t\tconsole.log(\"user successfully followed\");\n\t\t\t\tswal('Success!', 'Followed!', 'success');\n\t\t\t});\n\t}\n\n\tunfollow(user) {\n\t\t//console.log('this.state', this.state);\n\t\t\tfetch(\"http://127.0.0.1:8000/user/unfollow/\"+user, {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Authorization': localStorage.getItem('token')\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(function(res){\n\t\t\t\treturn res;\n\t\t\t})\n\t\t\t.then(function(data){\n\t\t\t\tconsole.log(data.text);\n\t\t\t\tconsole.log(\"user successfully unfollowed\");\n\t\t\t\tswal('Success!', 'Unfollowed!', 'success');\n\t\t\t});\n\t}\n\n\tdelete() {\n\t\t\tfetch(\"http://127.0.0.1:8000/user/delete\", {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Authorization': localStorage.getItem('token')\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(function(res){\n\t\t\t\treturn res;\n\t\t\t})\n\t\t\t.then(function(data){\n\t\t\t\tconsole.log(data.text);\n\t\t\t\tconsole.log(\"user successfully deleted\");\n\t\t\t\tswal('Success!', 'Deleted!', 'success');\n\t\t\t\twindow.location = \"/signin\";\n\t\t\t});\n\t}\n\n\tgetUsers() {\n\t\taxios.get('http://127.0.0.1:8000/user/users', { 'headers': { 'Authorization': localStorage.getItem(\"token\")}})\n\t\t.then(res => {\n\t\t\t//console.log(res);\n\t\t\t//return res.data;\n\t\t\tthis.setState({users:res.data});\n\t\t});\n\t\treturn \"done\";\n\t}\n\n\tgetCurrent() {\n\t\taxios.get('http://127.0.0.1:8000/user/me', { 'headers': { 'Authorization': localStorage.getItem(\"token\")}})\n\t\t.then(res => {\n\t\t\t//console.log(res);\n\t\t\t//return res.data;\n\t\t\tthis.setState({currentUser:res.data});\n\t\t});\n\t\treturn \"done\";\n\t}\n\n\tedit() {\n\t\t\t//console.log('this.state', this.state);\n\t\tvar data = {\n\t\t\t\"username\": this.state.username,\n\t\t\t\"email\": this.state.email,\n\t\t}\n\t\tif (data.editedcontent !== '' ) {\n\t\t\tfetch(\"http://127.0.0.1:8000/user/edit\", {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Authorization': localStorage.getItem('token'),\n\t\t\t\t},\n\t\t\t\tbody:  JSON.stringify(data)\n\t\t\t})\n\t\t\t.then(function(res){\n\t\t\t\treturn res;\n\t\t\t})\n\t\t\t.then(function(data){\n\t\t\t\tconsole.log(data);\n\t\t\t\tconsole.log(\"User successfully edited\");\n\t\t\t\tswal('Success!', 'User successfully edited', 'success').then(function(){\n\t\t\t\t\twindow.location = \"/admin\";\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.log(\"content field empty\");\n\t\t\tswal('Oops!', 'Seems like the content of your post is empty!', 'error');\n\t\t}\n\t}\n\n\n\tcomponentDidMount() {\n\t\tthis.getUsers();\n\t\tthis.getCurrent();\n\t}\n\n\n\n\trender(){\n\t\tvar users = this.state.users;\n\t\tvar current = this.state.currentUser;\n\t\tconsole.log(\"state\", this.state);\n\t\treturn (\n\t\t\t<div className = \"container\">\n\t\t\t<h2>My profile</h2>\n\t\t\t{\n\t\t\t\tcurrent.map((user) => {\n\t\t\t\t\treturn(\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Well>\n\t\t\t\t\t\t\t\t<b>{user.username} </b><br/>\n\t\t\t\t\t\t\t\t{user.email}<br/>\n\t\t\t\t\t\t\t\tTweets: <br/>\n\t\t\t\t\t\t\t\tFollowers:\n\t\t\t\t\t\t\t\t<ButtonToolbar>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName='btn pull-right btn-danger'\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tonClick={() => this.delete()}>\n\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName='btn btn-primary pull-right'\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ userFormModal: true })}>\n\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</ButtonToolbar>\n\n\t\t\t\t\t\t\t</Well>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t<h2>All Users</h2>\n\t\t\t{\n\t\t\t\tusers.map((user) => {\n\t\t\t\t\treturn(\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Well>\n\t\t\t\t\t\t\t\t<b>{user.username} </b><br/>\n\t\t\t\t\t\t\t\t{user.email}<br/>\n\t\t\t\t\t\t\t\tTweets: <br/>\n\t\t\t\t\t\t\t\tFollowers:\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName='btn pull-right'\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tonClick={() => this.unfollow(user.username)}>\n\t\t\t\t\t\t\t\tUnfollow\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName='btn btn-primary pull-right'\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tonClick={() => this.follow(user.username)}>\n\t\t\t\t\t\t\t\tFollow\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Well>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t<Modal show={this.state.userFormModal}>\n\t\t\t\t<br />\n\t\t\t\t<Modal.Body>\n\t\t\t\t<h2> Edit my profile </h2>\n\t\t\t\t\t<div className='form-group'>\n\t\t\t\t\t\tUsername\n\t\t\t\t\t\t<input\n\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tplaceholder= {this.stat}\n\t\t\t\t\t\tonChange={event => this.setState({username:event.target.value})}/>\n\n\t\t\t\t\t\tEmail\n\t\t\t\t\t\t<input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\tplaceholder= \"email\"\n\t\t\t\t\t\tonChange={event => this.setState({email:event.target.value})}/>\n\n\t\t\t\t\t\tPassword\n\t\t\t\t\t\t<input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\tplaceholder= \"password\"\n\t\t\t\t\t\tonChange={event => this.setState({password:event.target.value})}/>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='btn btn-primary pull-right'\n\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\tonClick={() => this.updateUser()}>\n\t\t\t\t\t\t\tPost\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<br/>\n\n\t\t\t\t\t</div>\n\t\t\t\t</Modal.Body>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button\n\t\t\t\t\tid=\"closeform\"\n\t\t\t\t\tonClick={() => this.setState({ userFormModal: false })}\n\t\t\t\t\t>\n\t\t\t\t\tClose\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\n\t\t\t</div>\n\t\t\t)\n\t}\n\n}\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}